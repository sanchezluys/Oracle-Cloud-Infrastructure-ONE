## Creando una instancia

- recursos informaticos

![alt computes_oci](/imagenes/clase05/computes_oci.png)

- se puede personalizar la computadora a usar, shape flexible

![alt shape_flexible](/imagenes/clase05/shape_flexible.png)

- creando una instancia

![alt creando_instancia](/imagenes/clase05/creando_instancia.png)

- cuando se crea la instancia se puede seleccionar el tipo de imagen que se refiere al sistema operativo, existen pagos, con licencia, para nuestro caso se recomienda **siempre libre** o gratis para siempre. va a existir un volumen o disco que estará disponible en la red

![alt imagen_shape](/imagenes/clase05/imagen_shape.png)

- en el shape puede existir una maquina virtual o maquina dedicada
- es importante observar que sea siempre gratis o generará costo, en mi caso aplica imgen linux de oracle + procesador Ampere (ARM) con 1 cpu y 6gb ram
- Máquina virtual, 1 core OCPU, 6 GB memory, 1 Gbps network bandwidth

![alt shape_1](/imagenes/clase05/shape_1.png)

- la red la toma por defecto la que ya creamos, si es en otra red entonces cambiar aqui, y la instancia tiene 2 ips, una publica y una privada

![alt red_instancia](/imagenes/clase05/red_instancia.png)

- es necesario configurar la seguridad ssh para conectarme a la instancia, con la llave publica y privada creada anteriormente.

![alt clave_ssh](/imagenes/clase05/clave_ssh.png)

- para traer la clave publica lo hacemos por consola o shell, y se pega

```bash
    Bienvenido a Oracle Cloud Shell.

    Notificación de cambio de versión: Cloud Shell se actualizará a Oracle Linux 8.

    Su máquina de Cloud Shell incluye 5 GB de almacenamiento para su directorio raíz. Su Cloud Shell (máquina y directorio raíz) se encuentran en: Colombia Central (Bogota).
    Está utilizando Cloud Shell en el arrendamiento sanchezluys como usuario local de OCI luys_colombia@gmail.com

    Escriba `help` para obtener más información.
    luys_colom@cloudshell:~ (sa-bogota-1)$ pwd
    /home/luys_colom
    luys_colom@cloudshell:~ (sa-bogota-1)$ ls -a
    .  ..  .bash_history  .bash_logout  .bash_profile  .bashrc  .cstutorial.conf  .emacs  .npm  .ssh
    luys_colom@cloudshell:~ (sa-bogota-1)$ cd .ssh
    luys_colom@cloudshell:.ssh (sa-bogota-1)$ pwd
    /home/luys_colom/.ssh
    luys_colom@cloudshell:.ssh (sa-bogota-1)$ ls
    cloudshellkey  cloudshellkey.pub
    luys_colom@cloudshell:.ssh (sa-bogota-1)$ cat cloudshellkey.pub
    ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCpFpHmmj2jXWYaiIXfKfpr9dAm3MDqt6WtKyFYxvH9Fh+8tZeEcIhECAmDuKWY4caRMRKA6aY+UsZOqd5F5WA1asyO5D0nnkfWv4qHGK5xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    luys_colom@cloudshell:.ssh (sa-bogota-1)$ 
```

- configurando el disco, se desactiva el cifrado, se deja como la imagen:

![alt configurando_volumen](/imagenes/clase05/configurando_volumen.png)

- me da error, revisando la documentacion, lo recomendable es intentar en otro momento o crear otro dominio o ubicacion

![alt error_en_creacion](/imagenes/clase05/error_en_creacion.png)

- se crea una pila para activar el recurso cuando este disponible

![alt pila](/imagenes/clase05/pila.png)

- en dicord comentan que se puede crear varias instancias con estas caracteristicas

![alt instancias_discord](/imagenes/clase05/instancias_discord.png)



Creamos nuestro primer compute. Computes son la estructura de la OCI para provisionar y gerenciar hosts de computación, conocidos como instancias.

Puedes crear instancias conforme sea necesario para atender a los aplicativos que deseas implementar en la OCI. Después de crear una instancia, puedes accederla con seguridad utilizando una llave SSH, reiniciarla, adjuntar y desadjuntar volúmenes y cerrarlas. Pero recuerda que cualquier alteración hecha en las unidades locales de la instancia son pérdidas cuando las cierra.

Para crearnos una instancia, que será un servidor de Doguito Petshop, podemos acceder al menú “Computación” y después “Instancias”.



Como ya aprendimos, computes representan las instancias de servirán nuestras aplicaciones en cloud. Existen muchas opciones para elegir, que equilibran cuestiones de costo y performance.

Si te interesaste por este tema y quieres saber todos los detalles de la configuración de computes en OCI, tienes que ver esta playlist que nos explica todo sobre computes en OCI.

https://www.youtube.com/playlist?list=PLKCk3OyNwIzsAjIaUaVsKdXcfBOy6LASv

El contenido del video puede presentar algunos tópicos desactualizados, por eso, todos los detalles sobre la utilización de Redes en OCI pueden ser encontrados en la documentación oficial, a través del link:

Documentación de Oracle Cloud Infrastructure

https://docs.oracle.com/es-ww/iaas/Content/home.htm


## Configurando el servidor

- si se intenta ingresar al servidor de la instancia creada a su ip publica no deberia pasar nada,

con:

    ssh apc@la_ip_server -i cloudshellkey
    sudo yum -y install httpd 


- el resultado depende de la imagen que se seleccionó en la instancia.
- se debe configurar el firewall de la imagen, que no es el mismo de la red

```bash
    // para activar una regla en el firewall
    sudo firewall-cmd --permanent --add-port-80/tcp

    // recargar las reglas del firewall
    sudo firewall-cmd --reload

    // leugo iniciar el servicio httpd
    sudo systemctl start httpd

    // se cambia al superusuario de la instancia
    sudo su
    echo "<h1>hola mundo</h1>"

    // guardamos el html en su respectivo archivo
    echo "<h1>hola mundo</h1>" >> /var/www/html/index.html
```

- Luego en vnc primario, en la lista de seguridad, en donde solo esta activa el ssh en el puerto 22, es necesario activar la nueva regla de entrada

    CIDR 0.0.0./0 TCP RANGO:DESTINO 80

